<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
				<concept id="concept_okk_wjc_jtb"><title>MME support for CIoT for inbound roamers (Feature f11738-01)</title><shortdesc>This feature supports CIoT for inbound roamers. It supports connection to        IWK-SCEF, NB-IoT, and LTE-M operation. This feature also controls the access to NB-IoT RAT        for inbound roamers.</shortdesc><prolog><author>PEIPEI SHANG</author></prolog><conbody><p>When NB-IoT access is rejected based on the new accRestNBIOT field, the MME            allows the provisioning of a configurable cause code, which is sent in the rejected            access attempt (for example, attach CPSR).</p><p>The MME supports the following functionalities:</p><ul><li>                <p>The MME supports setting/updating the RAT type to LTE-M for T6a PDNs. Use global                    parameter <parmname>sendLtemRatTypeToScef</parmname> to specify whether the MME                    can send the LTE-M RAT to the SCEF for an applicable UE.</p>            </li><li>                <p>The MME supports LTE-M RAT type in the PDN Connectivity Status Report.</p>            </li><li>                <p>The MME supports configuration of IWK-SCEFs. Existing T6a local provisioning is                    reused and shared with homers.</p>                <ul><li>                        <p>All SCEF nodes assigned to an IWK-SCEF group must support the same                            IWK-SCEF functionality, for example, the ability to support MONTE                            verification or T6ai management.</p>                    </li><li>                        <p>If the DRAs are used, the DRAs must be able to route the IWK-SCEF traffic                            (based on host/realm, IMSI, message type, or other means) to the proper                            IWK-SCEF.</p>                    </li><li>                        <p>The draSupported flag must be set for each node in the                                <cmdname>rmtEndPtCfg</cmdname> command, regardless of whether                            direct-connect or DRA-routing is used. This allows the MME to learn the                            various destination host and destination realm values. This is important                            since the IWK-SCEF functions as a diameter proxy.</p>                    </li><li>                        <p>The SCTP is brought up and diameter initialization (for example, CER/A or                            DWR/A) to the IWK-SCEFs is not changed. Alarming and PMs are not                            changed.</p>                    </li><li>                        <p>The DRAs supports the home SCEF applications or they can be dedicated to                            the IWK-SCEF functionality. It is also possible to configure                            direct-connect IWK-SCEFs. The following figure illustrates IWF-SCEF                            connections via DRAs:</p>                        <fig><title>IWF-SCEF connections via DRAs</title><image href="iwk_scef_dra_inbound_roam.eps"/></fig>                        <ul><li>                                <p>The IWK-SCEF group(s) are used for inbound roamers. They can be                                    used for T6ai APNs and/or monitoring events. In this example,                                    all IWK-SCEFs are behind the DRA(s).</p>                            </li><li>                                <p>Each DRA in the network is defined with the                                        <cmdname>rmtEndPtCfg</cmdname> command. New DRA(s) can be                                    added for inbound roaming or existing DRA(s) can be used.</p>                            </li><li>                                <p>The DRA(s) are assigned to a new SCEF group(s) to be used for                                    inbound roamers with the <cmdname>scefGrp</cmdname> command.</p>                            </li></ul>                    </li></ul>            </li><li>                <p>The MME supports scefToGrp provisioning with an extra flag                    iwkScef and PLMN equal to 0 to support roamers. CLI restriction are as                    follows:</p>                <ul><li>                        <p>64 <cmdname>scefToGrp</cmdname> allowed for home PLMN + 64                                <cmdname>scefToGrp</cmdname> allowed for roaming PLMN(0).</p>                    </li><li>                        <p>32 active groups for home PLMN + 32 active groups for roaming PLMNs.</p>                    </li></ul>            </li><li>                <p>The MME populates the Diameter-Realm (DR) and Diameter-Host (DH) AVP values for                    egress T6ai Request messages. These requests are always routed via                        <cmdname>scefToGrp</cmdname> rules.</p>                <ul><li>                        <p>T6ai APN DH/DR population:</p>                        <ul><li>                                <p>As defined in 3GPP standards, the HSS must provide a SCEF ID and                                    a SCEF realm for a T6a APN configuration. Furthermore, when the                                    MME attempts to set up a T6ai APN/PDN (this could be part of                                    attach or it could be later for attach without PDN scenarios),                                    the MME sets the DH and DR for the initial CMR message to the                                    SCEF ID and SCEF realm from the subscription APN configuration.                                </p>                            </li><li>                                <p>The MME supports local provisioning override of the T6ai DH/DR                                    values (either in <cmdname>scefToGrp</cmdname> or                                        <cmdname>rmtEndPtCfg</cmdname> command) which are consistent                                    when routing through the <cmdname>scefToGrp</cmdname>                                    translation, and consistent with current operation.</p>                            </li><li>                                <p>The MME fills in all other AVPs in the T6ai:CMR                                    message is in the same manner as for home/shared subscribers and                                    TAHS.</p>                            </li><li>                                <p>The MME supports learned DH/DR for T6ai APN                                    management, for example, new values in the CMA OH/OR AVPs. These                                    learned values are used for the routing and DH/DR AVPs in                                    subsequent CMR and ODR egress messaging. <note>The corresponding answers provide new learned values. These                                        learned values are independent form the other learned DH/DR                                        in this requirement.</note></p>                            </li></ul>                    </li><li>Monitoring event validation DH/DR population:<ul><li>                                <p>As defined in 3GPP procedures, the MME relays an                                    inbound roamer’s monitoring event configurations to an IWK-SCEF                                    for authorization. The IWK-SCEF authorizes the inbound roamer's                                    monitoring event configurations based on monitoring type, load,                                    quota, rate and roaming agreement/SLA, and so on. The UE                                    identifier is not sent to the IWK-SCEF for the                                    authorization.</p>                            </li><li>                                <p>Authorization is accomplished by sending a                                    T6ai:CIR message with the monitoring configurations AVP. The MME                                    routes on and uses locally provisioned DR and DH values for the                                    first CIR. The MME obtains these DR/DH values from the <cmdname>scefToGrp</cmdname> rules.</p>                            </li><li>                                <p>For the CIR validation, the MME sends all monitoring events from                                    the ULA/IDR monitoring event configuration in one CIR message to                                    the IWK-SCEF for validation.</p>                            </li><li>                                <p>The MME supports learned DR/DR for this CIR/CIA application. The                                    locally configured data is used if the MME needs to send a                                    subsequent CIR for the UE. The reason for this is that the MME                                    does not know how long the learned DR/DH persists. Furthermore,                                    the UE identities are not passed to the IWK-SCEF in the                                    authorization.</p>                            </li></ul></li><li>Monitoring event reporting DH/DR population:<ul><li>                                <p>When the MME detects a validly configured event,                                    the 3GPP procedures dictate that the MME routes on and sets the                                    DH/DR in the initial T6ai:RIR message to the SCEF-ID and                                    SCEF-Realm from the event configuration. This is the same                                    handling as for the non-roamers in the current                                    implementation.</p>                            </li><li>                                <p>With this routing capability, the operator has                                    flexibility in assigning inbound roaming traffic to the                                    IWK-SCEFs. A given UE’s three sets of traffic (CIR, RIR, and                                    CMR/ODA) can be assigned to the same or separate IWK-SCEFs                                    depending on the routing configuration. The existing diameter                                    routing and weighting capabilities are reused for inbound                                    roamers.</p>                            </li></ul></li></ul>            </li><li>The MME validates an inbound roamer’s monitoring event configuration.<ul><li>                        <p>When the MME receives new or updated S6a monitoring event configurations                            for an inbound roaming UE, and the monitoring events are allowed per MME                            provisioning, the MME performs monitoring event validation with an                            IWK-SCEF as defined in 3GPP TS 29.128 Section 5.4. Basic steps are as                            follows:</p>                        <ol><li>                                <p>Create the CIR message and include the UE’s S6a                                    monitoring configuration data. Set the DH/DR and route per                                    Req15.</p>                            </li><li>                                <p>Determine from the CIA whether the IWK-SCEF                                    modified or refused some configurations. If so, the MME uses the                                    modified event configurations for the UE. Furthermore, the MME                                    notifies the HSS via NOR procedures of the modified/refused                                    configurations. See the NOR procedures in 3GPP TS 29.272 Section                                    5.2.5.1.2.</p>                            </li><li>                                <p>If the CIR cannot be routed or if the CIA times                                    out, the MME optionally performs retry depending on                                    provisioning. If the retry fails or is not provisioned, the MME                                    considers the validation to be failed for all configurations and                                    notifies the HSS accordingly.</p>                            </li></ol>                    </li><li>                        <p>3GPP procedures allow an event report to be included in the CIR message.                            The CMM MME implementation does not include a report within a CIR.</p>                    </li></ul></li><li>                <p>The MME supports control and operation of CIoT via                        <cmdname>uePlmnServices</cmdname> for inbound roamers.</p>            </li><li>                <p>The MME supports the full set of MONTE capabilities (currently supported for home                    subscribers, shared PLMN subscribers, and Treat-as-home subscribers) for inbound                    roamers. This includes but is not limited to:</p>                <ul><li>                        <p>S6a capability negotiation, event configuration, error                            handling via NOR, and so on</p>                    </li><li>                        <p>Event reporting via RIR over T6ai to the IWK-SCEF, using                            the appropriate destination host and realm</p>                    </li><li>                        <p>Assignment of <parmname>ueMonitoringProfile</parmname> to inbound roamers in the <cmdname>uePlmnServices</cmdname> record</p>                    </li><li>                        <p>Use of assigned DRA messaging priority</p>                    </li><li>                        <p>Event expiration handling</p>                    </li></ul>                <note>                    <p>Event reporting via IDA is not used for inbound roaming. If an immediate                        report is generated, it must be sent either as part of T6ai:CIR or in a                        subsequent T6ai:RIR.</p>                </note>            </li><li>                <p>The MME supports group service ID within IMSI-Group-ID based on                    feature <ph outputclass="featname">Group service provisioning (Feature                        f11701-07)</ph> for inbound roamers.</p>            </li><li>                <p>The MME supports the full set of capabilities (currently                    supported for home subscribers, shared PLMN subscribers, and Treat-as-home                    subscribers) for establishing, maintaining, and using T6ai PDNs to an IWK-SCEF,                    as defined in feature <ph outputclass="featname">MME support for CIoT monitoring                        procedures (Feature f11702-01)</ph>. These capabilities include but are not                    limited to:</p>                <ul><li>                        <p>T6ai APN mapping to the IWK-SCEF</p>                    </li><li>                        <p>Creation, deletion, modification, and use of PDNs to the                            IWK-SCEF</p>                    </li><li>                        <p>Use of assigned DRA messaging priority</p>                    </li><li>                        <p>Mobile Originated (ODR) and Mobile Terminated (TDR)                            operations</p>                    </li><li>                        <p>Message Buffering</p>                    </li><li>                        <p>Overload control</p>                    </li><li>                        <p>All AVPs currently supported in T6a messaging for home                            traffic</p>                    </li></ul>                <note>The SCEF timers (CMR answer, ODA, TDA, CP user inactivity) are globally                    defined and are reused for this feature.</note>            </li><li>                <p>The MME supports NIDD PDNs over S11u for inbound roamers. These capabilities                    include but are not limited to:</p>                <ul><li>                        <p>Creation, deletion, modification, and use of “NIDD” PDNs                            over S11u</p>                    </li><li>                        <p>Buffering</p>                    </li><li>                        <p>Throttling</p>                    </li><li>                        <p>Rate control</p>                    </li><li>                        <p>LTE-M indication</p>                    </li></ul>            </li><li>                <p>The MME supports NB-IoT access control                        (<parmname>roamingNbIotNotAllowed</parmname>). Separate access control is                    supported for roamers, homers, shared PLMN, and TAHS PLMN.</p>            </li><li>                <p>The MME supports disableUeMonitoring flag in <cmdname>imsiRangeServices</cmdname>                    (disabled by default) for inbound roamers. The purpose is to allow gradual                    introduction of MONTE for inbound roamers. The same flag is available to be used                    for home/shared/TAHS subscribers.</p>            </li><li>                <p>The MME supports communication failure event for inbound roamers.</p>            </li><li>                <p>The MME accepts up to 16 total concurrent requests across all SCEFs for the                    number of UEs per location monitoring event configuration.</p>            </li><li>                <p>Roamers in the following features are supported in this                    feature::</p>                <ul><li><ph outputclass="featname">MME support for non-IP with S1-U transferred                            (Feature f11723-01)</ph></li><li><ph outputclass="featname">Switching data transport between control plane                            and user plane (Feature f11708-01)</ph></li><li><ph outputclass="featname">Control plane CIoT optimization for non-IP data                            delivery (NIDD) via Service Capability Exposure Function (SCEF) (Feature                            f11701-02)</ph></li><li><ph outputclass="featname">Control plane CIoT EPS optimizations for both                            non-IP data and IP through SGi (Feature f11701-03)</ph></li><li><ph outputclass="featname">MME support for CIoT monitoring procedures                            (Feature f11702-01)</ph></li><li><ph outputclass="featname">User plane CIoT EPS optimizations - bearer                            activation without SR (Feature f11701-04)</ph></li></ul>            </li><li>UE radio capabilities match procedure is supported as part of this feature. This                procedure triggers the eNB to send the UE capabilities information indication, which                is the only S1AP message that can contain the LTE-M indication.</li></ul></conbody></concept>