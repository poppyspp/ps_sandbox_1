<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
				<concept status="deleted" id="concept_gsk_wjc_jtb"><title>AMF support for standards update (Feature f10003-05)</title><shortdesc>This feature supports the standards updates for the AMF.</shortdesc><prolog><author>PEIPEI SHANG</author></prolog><conbody><table frame="all"><title>Standards update impacts</title><tgroup cols="2"><colspec colname="c1" colnum="1" colwidth="1*"/><colspec colname="c2" colnum="2" colwidth="4.39*"/><thead><row><entry>Standard/CR</entry><entry>Description</entry></row></thead><tbody><row><entry namest="c1" nameend="c2">3GPP TS 23.502</entry></row><row><entry>CR1684 </entry><entry>                            <p>This CR adds a description to the UE policy                                association establishment call flow scenario by stating that if no                                UE Policy Container is received during UE policy association                                establishment procedure, the AMF establishes UE policy association. </p>                            <p>The AMF is provisioned with global parameter                                    <parmname>nouePolicyContainerReceived</parmname>. By default, it is disabled.                                When this parameter is enabled, the AMF establishes UE policy                                association if no UE policy Container is received during the UE                                policy association establishment.</p>                        </entry></row><row><entry>CR2278</entry><entry>                            <p>The AMF supports CR 2278 to trigger the SMS                                activation and deactivation per access type.</p>                            <p>The activation can also add an access type (in addition to the                                previously activated access type) and the deactivation can remove an                                access type (while the SMS service remains for the other access, if                                activated).</p>                        </entry></row><row><entry>CR2378</entry><entry>                            <p>The AMF supports CR2378 to subdivide the UE                                reachability event into two cases: UE reachability status change (UE                                reachable/unreachable/regulatory only, for example, SMF use) and UE                                reachability for DL traffic triggered, for example, after MT SMS                                delivery failure by UDM. In case of the former case, the URRP-AMF                                bit is not used. In case of the latter case, the AMF only notifies                                the UDM when the URRP-AMF bit was set on the AMF.</p>                            <p>For the reachability event, a parameter reachability                                filter is introduced to differentiate the cases of the UE                                reachability status change and the UE reachability for DL traffic.                                The absence of the reachability filter is interpreted as UE                                reachability status change.</p>                        </entry></row><row><entry>CR2443</entry><entry>                            <p>The AMF supports CR2443 to correct the interlinked                                steps of the service request and the network-triggered service                                request procedures.</p>                            <ul><li>The AMF supports the area of validity parameter from the SMF as part of the                                    N1N2Message transfer request. The AMF only delivers the SMF                                    requested N2 container inside the defined area of validity.                                        <note> The purpose is to avoid the                                        discarding of the initially received N1N2 message and avoid                                        an unnecessary triggering of the activation when the AMF                                        directly sends the previously received N1N2 Request                                        message.</note></li><li>On network-triggered service request, the up reactivation (connected) is                                    modified by the CR. If the UE is in CM-CONNECTED state when                                    receiving the N1N2 message transfer request, the procedures                                    starting from SM context update of UE-triggered service request                                    procedure are performed.</li><li>On network-triggered service request, the service request procedure (containing                                    the UE-triggered service request) is modified to remove the                                    sentence referring to the SM context update during the                                    UE-triggered service request.</li><li>                                    <p>On UE-triggered service request procedure,                                        the Nsmf_PDUSession_UpdateSmContext Request is modified on                                        some of the existing conditions when triggering the SM                                        context update from the AMF. When triggered in response to                                        paging or NAS notification indicating 3GPP access, or due to                                        network-triggered service request when the UE was                                        CM-CONNECTED (further above previous update of the CR), but                                        either the UE is outside of the area of validity, or the                                        area of validity is not provided, the AMF does not send the                                        SMF provided N2, but instead, triggers the SM context update                                        towards the SMF at this point.</p>                                    <p>Otherwise if the UE is in the Area of validity, the SM                                        context update procedure is skipped.</p>                                    <p>Then the SM context update is triggered when                                        the UE-triggered service request is in response to paging or                                        NAS notification indicating non-3GPP access and the AMF                                        receives N2 only, or both N1 and N2 message.</p>                                    <note>                                        <p>The AMF does not trigger SM context                                            update, during the UE-triggered service request, towards                                            the SMF, if the procedure is triggered in response to                                            paging, or NAS notification, or when SMF trigger was                                            received when the UE is CM-CONNECTED, and the UE is                                            inside the valid SMF provided area.</p>                                    </note>                                    <p>If the UPF endpoint already provided in the                                        N1N2Transfer is valid, and the UE is inside the area of                                        validity, the AMF sends the provided N2 (and N1 if included)                                        to the RAN, directly without running SM context update                                        activation.</p>                                    <p>If the AMF detects that according to the                                        UE-triggered service request. The                                        Nsmf_PDUSession_UpdateSmContext Request message is modified                                        to trigger the SM context update, the AMF includes the UE                                        location (on the SM context update) to allow the SMF to                                        reselect the UPF (I-UPF) and provide an updated N2                                        container.</p>                                    <note>                                        <p>Unnecessary SM context update activation,                                            for example, re-requesting the N2 wastes resources and                                            causes additional delay, especially in networks where                                            the UPF/I-UPFs cover large areas and rarely need to be                                            changed.</p>                                    </note>                                </li><li>The AMF also supports the UE-triggered service request procedure update when the                                    I-SMF exists or is inserted/changed/removed during the                                    procedure.</li><li>                                    <p>The AMF supports a provisioning parameter to                                        allow to control how the AMF applies the area of validity                                        parameter: Assume that the current area is always valid for                                        the N2 container (always optimizes the signaling and skips                                        SM context update regardless of the area of validity, or                                        validates the area according to the area of validity                                        parameter and send update SM context if the area of validity                                        is not provided, or the UE is outside the area.</p>                                    <p>The AMF supports receiving up to 100 TAs from the SMF.</p>                                    <p>The AMF only applies the area of validity for                                        the N2-setup containers, for example, the area of validity                                        does not apply for modification or the release of the N2                                        containers.</p>                                    <p>When the UE is outside the area of validity                                        or the area of validity is not provided, the AMF is                                        provisioned to validate the area, and the AMF receives the                                        N1N2Message Transfer Request message including an N2-setup                                        container. While the UE is connected, the AMF replies to the                                        SMF with 202 accepted ATTEMPTING_TO_REACH_UE and triggers an                                        SM context update with the UE location information included,                                        to trigger the SMF to reselect the UPF and re-trigger the                                        N1N2MessageTransfer with updated user plane endpoint.</p>                                </li></ul>                        </entry></row><row><entry>CR2445</entry><entry>This CR introduces stage 3 alignment on clarification of registration status                            update for the PCF for the UE Policy. </entry></row><row><entry namest="c1" nameend="c2">3GPP TS 29.500</entry></row><row><entry>CR0129</entry><entry>Based on this CR, when the AMF is a service producer and rejects an                            API request without the OAuth 2.0 access token or an API request with an                            invalid OAuth 2.0 access token:<ul><li>The AMF always includes the "realm" attribute, for example, even                                    if the request is without an OAuth  2.0 access token.</li><li>If the request contained a token which was deemed as invalid                                    (for example, it is expired or malformed), the AMF adds an                                    "error" attribute set to invalid token.</li><li>If the request did not contain a token, the "error" attribute is                                    not included.</li></ul></entry></row><row><entry namest="c1" nameend="c2">3GPP TS 29.502</entry></row><row><entry>CR0348</entry><entry>This CR0348 supports receiving N2 information as part of SmContextCreateError                            during the I-SMF/V-SMF insertion, change or removal on Xn HO. When                            received, the AMF provides the received N2 information towards the (R)AN                            on Path Switch Acknowledge or Path Switch Failure message.</entry></row><row><entry>CR0368</entry><entry>                            <p>The AMF supports CR0368 for a new cause value on                                SmContextCreateData NOT_SUPPORTED_WITH_ISMF. For example, if the PDU                                corresponds to a LADN.</p>                            <p>The new SMF cause value by default is mapped to NAS                                cause 0 for both UL NAS and PDU reactivation result procedures (no                                cause is provided towards the UE).</p>                            <p>The PCMD supports the new cause value on the                                corresponding marker.</p>                            <p>The AMF also supports applying this cause for the SM                                context create error, specific PM count                                VS.PduSessEstFailPerAppError.</p>                        </entry></row><row><entry>CR0377</entry><entry>                            <p>The AMF supports CR0377 to add hSmfId, smfId,                                additionalHsmfId, and SmContextSmfId on the SmContextCreateData and                                a new error SERVICE_NOT_AUTHORIZED_BY_NEXT_HOP.</p>                            <p>The new SMF cause value by default is mapped to NAS                                cause 0 for both UL NAS and PDU reactivation result procedures (no                                cause is provided towards the UE).</p>                            <p>The PCMD supports the new cause value on the corresponding                                marker.</p>                            <p>The AMF also supports applying this cause for the SM                                context create error, specific PM count                                VS.PduSessEstFailPerAppError.</p>                        </entry></row><row><entry>CR0353</entry><entry>The AMF supports CR0353 for the format of API URI of smfId and hSmfId on the                            SmContextCreatedData.</entry></row><row><entry>CR0322</entry><entry>The AMF supports CR0322 to to receive in SmContextCreateData the                                <parmname>smServiceInstanceId</parmname> parameter either the I-SMF,                            H-SMF, or SMF instance ID, depending on the case in question.</entry></row><row><entry>CR0321</entry><entry>The AMF supports CR0321 for the format of the Nsmf_PDUSession API URI                            as {apiRoot}/&lt;apiName&gt;/&lt;apiVersion&gt;/.</entry></row><row><entry>CR0329</entry><entry>                            <p>The AMF supports CR0329 to include the S-NSSAI to the I-SMF/V-SMF                                when the I-/V-SMF is involved on the EPS to the 5GS idle mode                                mobility or handover with the N26 interface.</p>                            <p>The S-NSSAI is present on the SmContetxCreateData                                during an EPS to 5GS idle mode mobility or handover with the                                I-SMF/V-SMF involved using the N26 interface. In this case, it                                contains the S-NSSAI configured in the AMF for the EPS                                interworking.</p>                            <p>The S-NSSAI on SmContextUpdateData is sent to the V-SMF, during an                                EPS to 5GS mobility registration using the N26 interface, if the                                S-NSSAI for the serving PLMN derived from the S-NSSAI of the home                                PLMN differs from the S-NSSAI provided in the Create SM Context                                Request message.</p>                            <p>When present, it contains the S-NSSAI for the serving PLMN.</p>                            <p>The AMF deduces the S-NSSAI to be used on SM context create according                                to AMF provisioned CLI mapping from DNN to S-NSSAI. The AMF includes                                the S-NSSAI on the NRF query when looking for I-/V-SMF (both the                                default and the possible new one, if needed to be changed).</p>                        </entry></row><row><entry>CR0340, CR0367</entry><entry>The AMF supports CR0340 and CR0367 to update the condition of                            upCnxState attribute in SmContextCreateData to cover the registration                            procedure with I-SMF insertion, change, and removal, when the user plane                            is established as part of the registration procedure.</entry></row><row><entry>CR0362</entry><entry>The AMF supports CR0362 for the TEID and EpsBearerContextStatus                            encoding: “Each character in the string takes a value of "0" to "9" or                            "a" to "f", or "A" to "F" and represents 4 bits.”.</entry></row><row><entry>CR0363</entry><entry>The AMF supports CR0363 for the Binary GTP/NAS IEs encoded with the                            IEI/Type and Length (TLV).</entry></row><row><entry>CR0370</entry><entry>                            <p>The AMF supports CR0370 for UE reachability event subdivision into                                “UE reachability status change” and “UE reachability for DL                                traffic”.</p>                            <p>The “UE reachability status change” subscription enables receiving                                status changes between REACHABLE, UNREACHABLE and                                REGULATORY_ONLY.</p>                            <p>The “UE reachable for DL traffic” enables receiving notification when                                the UE transitions to CM-CONNECTED or when the UE becomes reachable                                for paging.</p>                            <p>Reachability Filter parameter is provided to distinguish the above                                cases.</p>                        </entry></row><row><entry namest="c1" nameend="c2">3GPP TS 29.503</entry></row><row><entry>CR0414</entry><entry>The AMF provides acknowledgement from the UE to the UDM about                            successful delivery of the network slicing subscription change                            indication.</entry></row><row><entry namest="c1" nameend="c2">3GPP TS 29.513</entry></row><row><entry>CR0175</entry><entry>                            <p>This CR introduces following changes to AM Policy Association                                Establishment and Modification call flows:</p>                            <p>For AM Policy association establishment:</p>                            <ol><li>Subclause reference of 29.507 is added. The (V)PCF sends an HTTP "201 Created"                                    response to the AMF with the determined policies as described in                                    subclause 4.2.2 of 3GPP TS 29.507.</li><li>Internal group IDs, alternative or backup address(es) of the AMF                                    and trace control and configuration parameters information are                                    added in the request message.</li><li>Removed the existing NOTE and added a NOTE to clarify that if the PCF rejects                                    the AM policy association establishment, the AMF deploys the                                    access and mobility control policy information based on the                                    policy retrieved from the UDM, if available, or the local                                    configuration.</li></ol>                        </entry></row><row><entry namest="c1" nameend="c2">3GPP TS 29.518</entry></row><row><entry>CR0432, CR0372, CR0428</entry><entry>                            <p>Remove enumeration value INITIAL_LOCATION.</p>                            <p>IE correction from pwdErrorinfo to pwsErrorInfo.</p>                            <p>The AMF supports patch request body on data types                                array(AmfUpdateEventSubscriptionItem) and                                array(AmfUpdateEventOptionItem).</p>                        </entry></row><row><entry>CR0396</entry><entry>                            <p>In case that the network supports interworking using the N26                                interface between the MME and the AMF, the AMF includes the selected                                EPS NAS algorithms (defined in Annex B of TS 33.401 [10]) to be used                                after mobility to EPS in the NAS Security Mode Command message. The                                UE stores the algorithms for use after mobility to EPS using the N26                                interface between the MME and the AMF. The AMF stores the selected                                EPS NAS algorithms in the UE security context.</p>                            <p>When the AMF change happens either due to N2-handover                                or idle mode mobility, the selected EPS NAS algorithms are always                                included in the 5G UE security context and provided to the target                                AMF as part of the 5G UE security context.</p>                            <p>If the selected EPS NAS algorithm is passed to the                                UE, the AMF stores it in the UE security context and transfers it to                                the new AMF during inter-AMF mobility as part of the UE security                                context.</p>                        </entry></row><row><entry namest="c1" nameend="c2">3GPP TS 29.540</entry></row><row><entry>CR0058</entry><entry>                            <p>The AMF supports CR0058 for SMS activate/deactivate per access type.                                The AMF supports the additional parameter                                    <parmname>additionalAccessType</parmname> as part of                                    <cmdname>UeSmsContextData</cmdname>.</p>                            <p>Upon the UE registration over the second access, when                                the UE is already registered over a different access on the AMF, the                                AMF sends the Activate (PUT Request) message to the SMSF including                                the newly added access type and the previously accepted access type                                as <parmname>additionalAccessType</parmname>.</p>                            <p>The AMF sends the Deactivate (Deleted Request)                                message towards the SMSF only when no remaining access registration                                is left on the AMF.</p>                            <p>When the AMF considers the UE deregistered over one                                access and needs to remove one access registration, while the other                                access registration still remains on the AMF, the AMF triggers a                                Deactivate (PUT Request) message to update the registration status                                at the SMSF to only contain the remaining access type registration.                                The AMF only includes the remaining access type as the                                accessType.</p>                        </entry></row><row><entry>CR0065</entry><entry>                            <p>The AMF supports CR0065 to solve an inter-AMF                                mobility issue at the SMSF. The new AMF activation and old AMF                                deactivation occurs closely to each other in time. This may cause an                                issue with the new activation. The AMF supports receiving an ETag                                HTTP header on the PUT response and providing an If-Match HTTP                                header on the DELETE request.</p>                            <p>The AMF supports storing max 64 bytes long ETag header.</p>                        </entry></row><row><entry namest="c1" nameend="c2">3GPP TS 33.501</entry></row><row><entry>CR0956</entry><entry>                            <p>This CR introduces correction to clause 13.4.1.1 (Service access                                authorization within the PLMN):</p>                            <p>The NRF authorizes the NF service consumer.</p>                        </entry></row><row><entry>CR0945</entry><entry>                            <p>This CR provides clarification that the symmetric                                keys are pairwise between the NRF and the NF service producer and                                the provisioning of such keys are outside the scope of this                                document.</p>                            <p>NOTE: Securing the access token using message authentication codes                                (MAC) based on JSON web signature (JWS) as described in RFC7515                                requires a pairwise pre-shared symmetric key between the NRF and the                                NF service producer.</p>                        </entry></row><row><entry>CR0948</entry><entry>                            <p>The static authorization is a local authorization at                                the NRF and the NF service producer and can be used when the                                token-based authorization is not used.</p>                            <p>During the Nnrf_NFDiscovery procedure, the NRF ensures that the NF                                service consumer is authorized to discover the NF service producer                                service(s) as specified in clause 13.3.1 of this document.</p>                            <p>If the token-based authorization is not used within                                one PLMN and the NF service producer receives a service request, the                                NF service producer follows the authorization of the NF service                                consumer before granting the NF service consumer access to the                                service API, (clause 13.3.2).</p>                        </entry></row><row><entry namest="c1" nameend="c2">3GPP TS 38.413</entry></row><row><entry>CR0388</entry><entry>The AMF supports backward incompatible CR0388 introduced to allow NR-DC                            testing and avoid backward incompatibility.</entry></row></tbody></tgroup></table></conbody></concept>