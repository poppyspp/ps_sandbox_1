<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
				<concept id="concept_n5j_wjc_jtb"><title>AMF support for behaviors for HTTP response codes 307, 429 and 503 (Feature        f20081-02)</title><shortdesc>This feature covers SBI server and client-side interfaces that have specific        behaviors for issuing response codes 307, 429 and 503.</shortdesc><prolog><author>PEIPEI SHANG</author></prolog><conbody><p>The AMF server does not support HTTP response code 307 during the OLC.</p><p>The AMF server generates HTTP response code 429 or 503 during the following            overload conditions:</p><ul><li>The allowed request rate (HTTP requests per second) triggering                response code 429 is computed internally by the AMF based on a predicted request                rate for each local endpoint that supports the server connections (producer service                endpoints and notification endpoints). For the problem details of response code 429,                see 3GPP TS 29.500. The protocol/application error is NF_CONGESTION_RISK.</li><li>HTTP2 status code 503 is issued in response to peer network functions (peer                NFs), when the AMF is unable to provide service due to an internal service issue                related to an overload condition. When the AMF generates the retry after value, it                suggests the client to stay away for a time. The retry after value for code 503 is                computed by the AMF based on an internally hard-coded range:<ul><li>The retry after value used during the major overload is in                        the range of 1 to 10 seconds.</li><li>The retry after value used during the critical overload is                        in the range of 11 to 20 seconds.</li></ul></li></ul><p>An AMF client is any of the following:</p><ul><li>An AMF consumer using a service produced by a remote NF service instance which                was selected (discovered or provisioned) by the AMF NF service selection.</li><li>An AMF producer sending a notification to a remote NF consumer that subscribed                to such notifications.</li><li>An AMF call processing entity sending an HTTP2 request to a remote entity using                a callback URI or location header provided by the remote entity.</li></ul><p>If an AMF client receives a 429 or 503 HTTP code from an NF service instance which was            selected by the AMF, the AMF blacklists the remote NF service instance for a retry-after            time based on the retry after value in <cmdname>httpProfile</cmdname>.</p><p>The AMF client receiving 307 HTTP code is consolidated as below:</p><p>Support for NF types for AMF clients receiving the 307 HTTP code is shown below:</p><table colsep="1" frame="all" rowsep="1"><title>307 HTTP code for the AMF client</title><tgroup cols="2"><colspec colname="c1" colnum="1" colwidth="1*"/><colspec colname="c2" colnum="2" colwidth="2.85*"/><thead><row><entry>NF Type</entry><entry>AMF receiving HTTP code 307</entry></row></thead><tbody><row><entry>AUSF</entry><entry>Not supported.</entry></row><row><entry>UDM</entry><entry>Not supported.</entry></row><row><entry>PCF</entry><entry>Not supported.</entry></row><row><entry>EIR</entry><entry>Not supported.</entry></row><row><entry>LCSM</entry><entry>According to 3GPP TS 29.572, the LMF does not support                            HTTP code 307. </entry></row><row><entry>GMLC</entry><entry>Not supported.</entry></row><row><entry>SMF</entry><entry>Redirection to another endpoint within the same NF is                            supported. Redirection from one SMF to another SMF is not                            supported.</entry></row><row><entry>SMSF</entry><entry>Redirection to another endpoint within the same NF is                            supported. Redirection from one SMSF to another SMSF is not                            supported.</entry></row><row><entry>NSSF</entry><entry>Not supported</entry></row><row><entry>NRF</entry><entry>Not sent towards the AMF.</entry></row></tbody></tgroup></table></conbody></concept>