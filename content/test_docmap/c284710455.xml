<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
				<concept id="concept_mfk_wjc_jtb"><title>Authentication of NTP server</title><shortdesc>This feature supports authentication of external NTP servers.</shortdesc><prolog><author>PEIPEI SHANG</author></prolog><conbody><p>The authentication is configured for each NTP server separately. The            authentication is optional and can be used for some NTP servers and not used for the            rest.</p><p>There are two methods to configure the symmetric keys to the NTP            client:</p><ul><li>                <p>Configure the key locally to the NTP client and server using CLI                    command (RFC 1305, Appendix C).</p>            </li><li>                <p>Let the NTP server deliver the key to the NTP client using NTS                    (RFC 8915).</p>            </li></ul><p>When the NTS is used, CA certificate is also needed to verify the TLS certificate            sent by the NTP server. The CA certificate is stored to the CMM configuration database            with <cmdname>ntsTlsCAcert</cmdname> command and it must be in PEM            format. The TCP port 4460 in the NTP server is also used in addition to the normal UDP            port 123. Therefore, the firewall rule should be added to open the TCP port 4460 in the            NECCs with <cmdname>firewallRule</cmdname> command:</p><p><codeph>cmm firewallRule create --ruleName NTS --externalIp 10.39.144.2                --firewallProtocol tcp --sport 4460 --ruleResult allow</codeph></p><p>In the configuration file <filepath>/etc/chrony.conf</filepath>            of NTP client, both IP addresses and server names can be used to identify the NTP            servers. The NTP servers are added to the configuration file when the CMM is provisioned            and defined with provision parameters <cmdname>ntp_primary</cmdname> and                <cmdname>ntp_secondary</cmdname>.</p><p>When the NTP server name is used in the NTP client's configuration file            instead of the IP addresses, the server name must also exist in the DNS.</p><p>When the NTS is used for the authentication, the NTP server name must match to            the name used in commonName (CN) field in the TLS certificate that the NTP server sends            to the CMM. The NTP client in the NECC verifies the received TLS certificate using CA            certificate configure with <cmdname>ntsTlsCAcert</cmdname> command.</p><p>The NTP client in the CMM uses TLS version 1.3 automatically when the NTS            is configured for the NTP server.</p></conbody></concept>