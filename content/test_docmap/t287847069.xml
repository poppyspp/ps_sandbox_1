<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE task PUBLIC "-//NSN//DTD DITA Task//EN" "nsntask.dtd">
				<task rev="CMM22" id="task_dpn_wjc_jtb"><title>Configuring CMM support for roaming - phase 2 for AMF</title><shortdesc>Step examples for configuring CMM support for roaming - phase 2 for        AMF.</shortdesc><prolog><author>PEIPEI SHANG</author></prolog><taskbody><steps><step><cmd>Configure a new NAS cause code mapping for access restriction.</cmd><stepxmp><codeph>cmm amfAccessRestrictionNasMappingProfile create                        --home3gppAccessNotAllowed &lt;integer&gt; --interPlmnMobRegUpdtRej                        &lt;integer&gt;</codeph></stepxmp></step><step><cmd>Enable inter-PLMN FQDN.</cmd><stepxmp><codeph>cmm amfInstance modify --interPlmnAmfLabel true</codeph></stepxmp></step><step><cmd>Configure override of DNN domain derivation.</cmd><stepxmp><codeph>cmm amfSupiRangeServices modify --amfDnnOverrideProfileName                        &lt;string&gt; --dnnMccOverride &lt;digits&gt; --dnnMncOverride                        &lt;digits&gt;</codeph></stepxmp></step><step><cmd>Configure equivalent PLMN sent towards GNB.</cmd><stepxmp>                    <codeblock>cmm amfSupiRangeServices modify --amfEplmnListNameGnb &lt;string&gt;
cmm amfUePlmnServices modify --amfEplmnListNameGnb &lt;string&gt;
</codeblock>                </stepxmp></step><step><cmd>Configure the mapping of local home PLMN to visited PLMN NSSAI.</cmd><stepxmp>                    <codeblock>cmm hplmnToVplmnSnssaiMapping modify --hplmnToVplmnSnssaiMappingListName &lt;string&gt; --hsnssaiName &lt;string&gt; --vsnssaiName &lt;string&gt; --vsnssaiDefault &lt;string&gt;
cmm hplmnToVplmnSnssaiMappingList modify --name &lt;string&gt;
cmm amfSupiRangeServices modify --hplmnToVplmnSnssaiMappingListName &lt;string&gt; --mappingOfAllowedHomeNssaiQuery &lt;list-item&gt;
cmm amfUePlmnServices modify --hplmnToVplmnSnssaiMappingListName &lt;string&gt; --mappingOfAllowedHomeNssaiQuery &lt;list-item&gt;
</codeblock>                </stepxmp><info>                    <p>When feature <ph outputclass="featname">AMF support for roaming - phase 3                            (Feature f20028-05)</ph> is enabled, the modification in                            <cite>Configuring AMF support for roaming - phase 3</cite> should be                        configured.</p>                </info><substeps><substep><cmd> Configure the preferred NF type.</cmd><info><p>Create the preferred NF type list.</p><codeph>cmm                                preferredNfTypeList create|show|modify|delete --name                                &lt;string&gt;</codeph><p>Create the preferred NF types.</p><codeph>cmm                                preferredNfTypes create|delete|list|show --preferredNfTypeListName                                &lt;string&gt; --preferredNfType &lt;list-item&gt; </codeph><p>Add the NF                                type list name to the network function instance.</p><codeph>cmm                                networkFunctionInstance Create|Show|Modify|Delete|List                                --preferredNfTypeListName &lt;string&gt; </codeph></info></substep><substep><cmd>Configure the Nitz info override profile.</cmd><info><p>Create the AMF UE Nitz information override profile.</p><codeph>cmm                                amfUeNitzInfoOverrideProfile create --name &lt;string&gt;                                --encodingName &lt;list-item&gt; --networkName &lt;string&gt;                                --networkShortName &lt;string&gt; --sendCountryInit &lt;list-item&gt;                                --sendNetworkName &lt;list-item&gt; --sendTzOffSet                                &lt;list-item&gt;</codeph><p>Add the UE Nitz profile name to AMF UE                                PLMN services and AMF SUPI range services.</p><codeph>cmm                                amfUePlmnServices Create|Show|Modify|Delete|List                                --amfUeNitzInfoOverrideProfileName &lt;string&gt;</codeph><codeph>cmm                                amfSupiRangeServices Create|Show|Modify|Delete|List                                --amfUeNitzInfoOverrideProfileName &lt;string&gt;</codeph></info></substep><substep><cmd>Configure the EIR check, emergency services, emergency                            fallback and IMS DNN subscription check.</cmd><stepxmp>                            <codeblock>cmm amfSupiRangeServices Create|Show|Modify|Delete|List --eirCheck &lt;list-item --emcSupport &lt;list-item&gt; --emfSupport &lt;list-item&gt; 
cmm amfUePlmnServices Create|Show|Modify|Delete|List --checkImsDnnSubscriptionVops &lt;list-item&gt; --eirCheck &lt;list-item&gt; --emcSupport &lt;list-item&gt; --emfSupport &lt;list-item&gt;</codeblock>                        </stepxmp></substep><substep><cmd>Configure the Steering of Roaming.</cmd><stepxmp>                            <codeblock>cmm amfSupiRangeServices Create|Show|Modify|Delete|List --sor &lt;list-item&gt;
cmm amfGParms Show|Modify|List --amfGparmName reuseRequestApiRootInLocationHeader --amfGparmValue &lt;string&gt;</codeblock>                        </stepxmp></substep><substep><cmd>Enable the reuse of apiRoot in the location                            header.</cmd><stepxmp><codeph>cmm amfGParms Show|Modify|List                                --amfGparmName reuseRequestApiRootInLocationHeader --amfGparmValue                                &lt;string&gt;</codeph></stepxmp></substep><substep><cmd>Configure the inter-PLMN FQDN.</cmd><stepxmp><codeph>cmm amfNotificationEndPointConfig                                Create|Show|Modify|Delete|List --interPlmnFqdn                                &lt;string&gt;</codeph></stepxmp></substep><substep><cmd>Configure the HPLMN to VPLMN NSSAI mapping.</cmd><stepxmp><codeph>cmm hplmnToVplmnSnssaiMap                                Create|Show|Delete|List --hplmnToVplmnSnssaiMappingListName                                &lt;string&gt; --hSliceServiceType &lt;integer&gt;                                --hSliceDifferentiator &lt;string&gt; --vsnssaiName &lt;string&gt;                            </codeph></stepxmp></substep><substep><cmd>Configure the default VPLMN NSSAI in AMF UE PLMN                            services and AMF SUPI range services.</cmd><stepxmp>                            <codeblock>cmm amfSupiRangeServices Create|Show|Modify|Delete|List --defaultVsnssaiName &lt;string&gt;
cmm amfUePlmnServices Create|Show|Modify|Delete|List --defaultVsnssaiName &lt;string&gt;</codeblock>                        </stepxmp></substep></substeps></step><step><cmd>Configure N26 interworking restriction TAI list.</cmd><substeps><substep><cmd>Create AMF TAI list for N26 interworking                            restriction.</cmd><stepxmp><codeph>cmm amfTaiList create                                --taiListType &lt;list-item&gt;</codeph></stepxmp></substep><substep><cmd>Add AMF TAI list to N26 interworking restriction TAI list.</cmd><stepxmp>                            <codeblock>cmm amfSupiRangeServices modify --n26IwkRestrictionTaiListName &lt;string&gt;
cmm amfUePlmnServices modify --n26IwkRestrictionTaiListName &lt;string&gt;
</codeblock>                        </stepxmp></substep></substeps></step><step><cmd>Configure inter-PLMN mobility support.</cmd><info>                    <p>In the following examples:</p>                    <ul><li>UE’s IMSI PLMN: 461 02</li><li>AMF’s home PLMN: 460-02 (serving PLMN)</li><li>AMF’s shared PLMN: 460-10 (serving PLMN)</li></ul>                </info><substeps><substep><cmd>Check and verify the configuration for handover from                            5GS to EPS via N26 interface (source AMF).</cmd><stepxmp><codeph>cmm amfGParms modify --amfGparmName                                n26iwkSuppt --amfGparmValue ENABLE</codeph><p>Check                                    <cmdname>amfUePlmnServices</cmdname> (IMSI PLMN, Serving PLMN)                                for <parmname>n26iwk</parmname>:</p><codeph>cmm amfUePlmnServices                                modify --name 461_02:460_02 --n26Iwk true</codeph><p>Check                                    <cmdname>amfUePlmnServices</cmdname> (target serving PLMN,                                Serving PLMN) for <parmname>interPlmnHandover</parmname>, if the UE                                is moving from it’s own network:</p><codeph>cmm amfUePlmnServices                                modify --name 461_02:460_02 --interPlmnHandover both</codeph><p>If                                the UE is moving from different network:</p><codeph>cmm                                amfUePlmnServices modify --name 460_10:460_02 --interPlmnHandover                                both</codeph></stepxmp></substep><substep><cmd>Check and verify the configuration for handover from                            EPS to 5GS via N26 interface (target AMF).</cmd><stepxmp><codeph>cmm amfGParms modify --amfGparmName                                n26iwkSuppt --amfGparmValue ENABLE</codeph><p>Check                                    <cmdname>amfUePlmnServices</cmdname> (IMSI PLMN,new serving                                PLMN) for <parmname>n26iwk</parmname>:</p><codeph>cmm                                amfUePlmnServices modify --name 461_02:460_02 --n26Iwk                                true</codeph><p>Check <cmdname>amfUePlmnServices</cmdname> (old                                serving PLMN,new serving PLMN) for <parmname>n26iwk</parmname>, if                                the UE is moving from it’s own network:</p><codeph>cmm                                amfUePlmnServices modify --name 461_02:460_02 --n26Iwk                                true</codeph><p>If UE is moving from different                                network:</p><codeph>cmm amfUePlmnServices modify --name                                460_10:460_02 --n26Iwk true</codeph><p>Check the configuration for                                possible N26 restriction on target TAI for                                    <cmdname>amfSupiRangeServices</cmdname>/<cmdname>amfUePlmnServices</cmdname>                                (new serving PLMN, IMSI PLMN):</p><codeph>cmm amfUePlmnServices                                modify --name 461_02:460_02 --n26Iwk true                                --n26IwkRestrictionTaiListName                            n26AmfIwkRestTaiList1</codeph></stepxmp></substep><substep><cmd>Check and verify the configuration for 5GS to EPS idle                            mobility (context request from the MME to the AMF).</cmd><stepxmp><codeph>cmm amfGParms modify --amfGparmName                                n26iwkSuppt --amfGparmValue ENABLE</codeph><p>Check                                    <cmdname>amfUePlmnServices</cmdname> (IMSI PLMN, old serving 5g                                PLMN) for <parmname>n26iwk</parmname>:</p><codeph>cmm                                amfUePlmnServices modify --name 461_02:460_02 --n26Iwk                                true</codeph><p>Check <cmdname>amfUePlmnServices</cmdname> (target                                serving PLMN,old serving PLMN) for <parmname>n26iwk</parmname>, if                                the UE is moving from its own network:</p><codeph>cmm                                amfUePlmnServices modify --name 461_02:460_02 --n26Iwk                                true</codeph><p>If the UE is moving from different                                network:</p><codeph>cmm amfUePlmnServices modify --name                                460_10:460_02 --n26Iwk true</codeph></stepxmp></substep><substep><cmd>Check and verify the configuration for EPS to 5GS idle                            mobility (context request from the AMF).</cmd><stepxmp><codeph>cmm amfGParms modify --amfGparmName                                n26iwkSupp --amfGparmValue ENABLE</codeph><p>Check                                    <cmdname>amfUePlmnServices</cmdname> (new serving 5g PLMN, old                                serving 4g PLMN) for                                <parmname>interPlmnMobRegUpdtReq</parmname>:</p><codeph>cmm                                amfUePlmnServices modify --name 460_10:460_02                                --interPlmnMobRegUpdtReq both</codeph></stepxmp></substep><substep><cmd>Check and verify the configuration for 5GS to 5GS                            mobility (T-AMF).</cmd><stepxmp><p>Check <cmdname>amfUePlmnServices</cmdname> (IMSI                                PLMN, serving PLMN) for <parmname>interPlmnInitRegReq=nr</parmname>,                                and                                <parmname>interPlmnMobRegUpdtReq=both/nr</parmname>:</p><codeph>cmm                                amfUePlmnServices modify --name 461_02:460_02</codeph><p>Check                                    <cmdname>amfUePlmnServices</cmdname> (old serving PLMN, new                                serving PLMN} for <parmname>interPlmnInitRegReq=nr</parmname>, and                                    <parmname>interPlmnMobRegUpdtReq=both/nr</parmname>:</p><codeph>cmm                                amfUePlmnServices modify --name 460_10:460_02</codeph><p>If the UE                                is moving from its own network:</p><codeph>cmm amfUePlmnServices                                modify --name 461_02:460_02</codeph></stepxmp></substep><substep><cmd>Check and verify the configuration for 5GS to 5GS                            connected mobility (S-AMF).</cmd><stepxmp>                            <p>Check <cmdname>amfUePlmnServices</cmdname> (IMSI PLMN, Serving PLMN)                                for <parmname>interPlmnInitRegReq=nr</parmname>,                                    <parmname>interPlmnMobRegUpdtReq=both/nr</parmname>,                                    <parmname>interPlmnHandover=true</parmname>, and                                    <parmname>interPlmnEmergencyHo=true</parmname>. </p>                            <p>Check <cmdname>amfUePlmnServices</cmdname> (Old Serving PLMN, New                                Serving PLMN) for <parmname>interPlmnInitRegReq=nr</parmname>,                                    <parmname>interPlmnMobRegUpdtReq=both/nr</parmname>,                                    <parmname>interPlmnHandover=true</parmname>, and                                    <parmname>interPlmnEmergencyHo=true</parmname>.</p>                        </stepxmp></substep></substeps></step><step><cmd>Configure inter-PLMN FQDN.</cmd><stepxmp><codeph>cmm nfServiceInstance modify --interPlmnFqdn                    &lt;string&gt;</codeph></stepxmp></step><step><cmd>Configure OAuth support for inter PLMN.</cmd><stepxmp><codeph>cmm amfSvcAgreementProfile modify --interPlmnOauthSupport                        &lt;list-item&gt;</codeph></stepxmp></step><step><cmd>Enable wild-card DNN.</cmd><stepxmp><codeph>cmm dnnToSnssai modify --dataNetworkName                    &lt;string&gt;</codeph></stepxmp></step></steps></taskbody></task>