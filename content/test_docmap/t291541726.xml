<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE task PUBLIC "-//NSN//DTD DITA Task//EN" "nsntask.dtd">
				<task id="task_jvn_wjc_jtb"><title>Configuring CMPv2 protocol</title><shortdesc>Use <cmdname>cmpPki</cmdname> and <cmdname>cmpProc</cmdname> commands to configure        the CMPv2 protocol.</shortdesc><prolog><author>PEIPEI SHANG</author></prolog><taskbody><steps><step><cmd>Configure PKI servers. Add PKI server configuration.</cmd><info>                    <p>The feature can be used only when at least one PKI server is configured.</p>                </info><stepxmp><codeph>cmm cmpPki create --pkiId 1 --remoteIp 10.102.45.69 --sharedKey                        abc123 --referenceNumber 10000 --remotePath / --cmmDn ate30-necc0 --pkiDn                        naboo</codeph></stepxmp></step><step><cmd>Request the TLS certificate from the PKI server.</cmd><info>                    <p>Use CMPv2 operation initial registration (IR) to request TLS certificate from                        the PKI server with given private key for the first time.</p>                    <p>Use CMPv2 operation certificate update (CR) to request more TLS certificates                        from the PKI server when another certificate(s) is already requested. Note                        that for authentication, operator needs to provide the private key used in                        initial registration (IR) operation and the TLS certificate received as a                        result of the IR operation. The received TLS certificate is written to the                        file which is given in the <parmname>signedCertFile</parmname> parameter,                        thus, it overwrites the TLS certificate file given in the same parameter.                        Make sure to backup the TLS certificate file received in initial                        registration operation before using the CLI command.</p>                    <p>Use CMPv2 operation key pair update (KUR) to request update for previously                        received TLS certificate from the PKI server. The TLS certificate is updated                        and its private key is given in <parmname>signedCertFile</parmname> and                            <parmname>privateKeyFile</parmname> parameters. Received new TLS                        certificate is written to the file which is given in                            <parmname>signedCertFile</parmname> parameter, thus, it overwrites old                        TLS certificate file.</p>                </info><substeps><substep><cmd>Create private key of the TLS certificate.</cmd><info>Private key can be created in any Linux machine or in the NECC.</info><stepxmp><codeph>openssl genrsa -out rsa_pkey.pem 2048</codeph></stepxmp></substep><substep><cmd>Request the TLS certificate from the PKI server.</cmd><stepxmp><codeph>cmm cmpProc create --pkiId 1 --cmpProcedureType ir                                --privateKeyFile /home/cmm/rsa_pkey.pem --signedCertFile                                /home/cmm/ir_cert.pem --tlsCertType 'server'</codeph></stepxmp></substep></substeps></step><step><cmd>Request the certificate revocation list (CRL) from the PKI server.</cmd><info>Use CMPv2 operation certificate revocation list (CRL) to request the TLS                    certificate revocation list (CRL) from the PKI server. Note that for                    authentication, operator needs to provide the private key used in initial                    registration (IR) operation and the TLS certificate received as a result of the                    IR operation. The received CRL is written to the file which is given in the                        <parmname>signedCertFile</parmname> parameter, thus, it overwrites the TLS                    certificate file given in the same parameter. Make sure to backup the TLS                    certificate file received in initial registration operation before using the CLI                    command.</info><stepxmp><codeph>cmm cmpProc create --pkiId 1 --cmpProcedureType crl                        --privateKeyFile /home/cmm/rsa_pkey.pem --signedCertFile                        /home/cmm/ir_cert.pem --tlsCertType 'server'</codeph></stepxmp></step></steps></taskbody></task>